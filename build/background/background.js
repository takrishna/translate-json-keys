"use strict";function fetchClipboard(){let e=document.getElementById("ta");return e.value="",e.select(),document.execCommand("paste")?e.value.trim():"Unable to fetch from Clipboard"}function runInBackground(e,t,r,a){for(var i of r.specs){let a=new Function("clipboard","url","arrayOrPattern","buildRequestParam","displayName",i.func)(t,i.url,i.arrayOrPattern,i.displayName,i.buildRequestParam);if(a){if(!r.autoOpen)return void setBadge("1");if(!(a.length>300)){if(r.prevVisit&&r.prevVisit.prevOpenUrl.trim()==a)setBadge("1");else{chrome.tabs.update(e.id,{url:a.url});let t={prevVisit:{prevOpenUrl:a.url,tabId:e.id}};chrome.storage.local.set(t,function(){}),setBadge("")}break}}}}function setBadge(e){chrome.browserAction.setBadgeText({text:e},e=>{})}chrome.tabs.onCreated.addListener(function(e){"chrome://newtab/"===e.pendingUrl&&chrome.storage.local.get(["specs","autoOpen","prevVisit"],function(t){runInBackground(e,fetchClipboard(),t,this)})}),chrome.tabs.onRemoved.addListener(function(e){chrome.storage.local.get("prevVisit",t=>{t.prevVisit&&t.prevVisit.tabId==e&&chrome.storage.local.remove("prevVisit")}),setBadge("")});